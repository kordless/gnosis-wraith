<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gnosis Wraith</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/styles.css') }}?v={{ range(10000, 99999) | random }}"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Favicon links -->
    <link
      rel="icon"
      type="image/svg+xml"
      href="{{ url_for('static', filename='images/favicon.svg') }}"
    />
    <link
      rel="icon"
      type="image/x-icon"
      href="{{ url_for('static', filename='images/favicon.ico') }}"
    />
    <link
      rel="icon"
      href="{{ url_for('static', filename='images/favicon.ico') }}"
      type="image/x-icon"
    />
    <link
      rel="shortcut icon"
      href="{{ url_for('static', filename='images/favicon.ico') }}"
      type="image/x-icon"
    />
    <link
      rel="icon"
      type="image/svg+xml"
      href="{{ url_for('static', filename='images/favicon.svg') }}"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="{{ url_for('static', filename='images/favicon-128x128.png') }}"
    />
    
    <!-- Added inline script to handle dependent dropdowns and keyboard shortcuts -->
    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', function() {
        // Check for URL fragment parameters (e.g., /#?q=tech+news&w=1)
        function handleUrlParameters() {
          // Get the URL hash (everything after #)
          const hash = window.location.hash.substring(1);
          
          // If there are parameters after # (e.g. #?q=something)
          if (hash && hash.includes('?')) {
            // Extract the query string part
            const queryString = hash.substring(hash.indexOf('?'));
            const urlParams = new URLSearchParams(queryString);
            
            // Get the query parameter
            const query = urlParams.get('q');
            const shouldSubmit = urlParams.get('w') === '1';
            
            // If query is present, populate the URL input field
            if (query) {
              const urlInput = document.getElementById('url');
              if (urlInput) {
                // Only handle special case for 'tech news' with Ctrl+Y shortcut
                let finalQuery = query;
                if (query.toLowerCase() === 'tech news') {
                  finalQuery = 'https://news.ycombinator.com/';
                } else if (!query.startsWith('http://') && !query.startsWith('https://')) {
                  // If not a URL, don't modify it - it could be a description
                  if (query.includes('.') && !query.includes(' ')) {  // Only add https:// if it looks like a pure domain
                    finalQuery = 'https://' + query;
                    console.log(`Added https:// prefix to: ${query}`);
                  }
                }
                
                // Set the value in the input field
                urlInput.value = finalQuery;
                
                // Highlight the input to show it was populated
                urlInput.classList.add('highlight-input');
                setTimeout(() => {
                  urlInput.classList.remove('highlight-input');
                }, 500);
                
                // If w=1, also submit the form
                if (shouldSubmit) {
                  // Click the crawl button after a short delay
                  setTimeout(() => {
                    const crawlBtn = document.getElementById('crawl-btn');
                    if (crawlBtn) {
                      crawlBtn.click();
                    }
                  }, 300);
                }
                
                // Clear the URL fragment to avoid resubmission on refresh
                // Use replaceState to modify the URL without adding to browser history
                if (window.history && window.history.replaceState) {
                  window.history.replaceState(null, document.title, window.location.pathname);
                }
              }
            }
          }
        }
        
        // Run URL parameter handler on page load
        handleUrlParameters();
        
        // Setup the dependency between screenshot and OCR options
        const screenshotSelect = document.getElementById('take-screenshot');
        const ocrSelect = document.getElementById('ocr-extraction');
        const ocrFormGroup = ocrSelect ? ocrSelect.closest('.form-group') : null;
        
        function updateOcrOptions() {
          if (!screenshotSelect || !ocrSelect) return;
          
          if (screenshotSelect.value === 'false') {
            // If screenshots are disabled, disable OCR and set to "No"
            ocrSelect.value = 'false';
            ocrSelect.disabled = true;
            if (ocrFormGroup) ocrFormGroup.classList.add('disabled-option');
            console.log('Screenshots disabled, OCR also disabled');
          } else {
            // If screenshots are enabled, enable OCR
            ocrSelect.disabled = false;
            if (ocrFormGroup) ocrFormGroup.classList.remove('disabled-option');
            console.log('Screenshots enabled, OCR enabled');
          }
        }
        
        // Add change handler to screenshot select
        if (screenshotSelect) {
          updateOcrOptions(); // Initialize state
          screenshotSelect.addEventListener('change', updateOcrOptions);
        }
        
        // Add keyboard shortcut for Ctrl+Y to populate URL and start crawling
        document.addEventListener('keydown', function(e) {
          // Check if Ctrl+Y is pressed
          if (e.ctrlKey && e.key === 'y') {
            const urlInput = document.getElementById('url');
            const crawlBtn = document.getElementById('crawl-btn');
            
            // If URL field is empty or not focused, populate it and click the button
            if (urlInput && crawlBtn && 
                (document.activeElement !== urlInput || urlInput.value.trim() === '')) {
              // Prevent default browser behavior
              e.preventDefault();
              
              // Populate with Hacker News URL
              urlInput.value = 'https://news.ycombinator.com/';
              
              // Flash the URL input to indicate it's been populated
              urlInput.classList.add('highlight-input');
              setTimeout(() => {
                urlInput.classList.remove('highlight-input');
              }, 500);
              
              // Click the crawl button after a short delay
              setTimeout(() => {
                crawlBtn.click();
              }, 300);
            }
          }
        });
      });
    </script>
    
    <!-- Add some CSS for disabled options and action buttons -->
    <style>
      .disabled-option {
        opacity: 0.6;
      }
      
      .disabled-option select {
        background-color: #f1f1f1;
      }
      
      /* Action buttons styles */
      .action-buttons {
        display: flex;
        justify-content: flex-end;
        flex-wrap: wrap;
        margin: 15px 0;
      }
      
      .btn.danger {
        background-color: #e74c3c;
        color: white;
        border: 1px solid #c0392b;
      }
      
      .btn.danger:hover {
        background-color: #c0392b;
      }
      
      /* Style for browser-specific instructions */
      .browser-instructions {
        margin: 30px 0;
        padding: 20px;
        border-radius: 8px;
        background-color: var(--input-bg);
        border: 1px solid var(--border-color);
      }
      
      .browser-instructions h4 {
        margin-top: 0;
        display: flex;
        align-items: center;
        font-size: 1.1em;
      }
      
      .browser-instructions h4 i {
        margin-right: 8px;
        font-size: 1.2em;
      }
      
      .browser-tabs {
        display: flex;
        flex-wrap: wrap;
        margin: 20px 0;
        border-bottom: 1px solid #dee2e6;
      }
      
      .browser-tab {
        padding: 8px 16px;
        cursor: pointer;
        border: 1px solid transparent;
        border-top-left-radius: 4px;
        border-top-right-radius: 4px;
        margin-right: 4px;
        margin-bottom: -1px;
        color: var(--text-color);
        transition: all 0.2s ease;
      }
      
      .browser-tab:hover {
        background-color: rgba(78, 158, 255, 0.08);
        border-color: var(--border-color);
      }
      
      .browser-tab.active {
        border-color: var(--primary-color) var(--primary-color) var(--card-bg);
        background-color: var(--card-bg);
        font-weight: bold;
        color: var(--primary-color);
      }
      
      .browser-content {
        display: none;
      }
      
      .browser-content.active {
        display: block;
      }
      
      .keyboard-shortcuts {
        margin-top: 30px;
        padding: 15px;
        background-color: #f8f9fa;
        border-radius: 8px;
      }
      
      .shortcut-key {
        display: inline-block;
        padding: 2px 8px;
        margin: 0 2px;
        background-color: var(--card-bg);
        border: 1px solid var(--border-color);
        color: var(--primary-color);
        border-radius: 3px;
        font-family: monospace;
        font-weight: bold;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }
      
      .feature-list {
        margin-top: 20px;
        padding-left: 20px;
      }
      
      .feature-item {
        margin-bottom: 10px;
      }
      
      /* Highlight effect for keyboard shortcut */
      @keyframes highlight-pulse {
        0% { background-color: transparent; }
        50% { background-color: rgba(92, 184, 92, 0.2); }
        100% { background-color: transparent; }
      }
      
      .highlight-input {
        animation: highlight-pulse 0.5s ease-in-out;
      }
      
      /* Keyboard key style */
      kbd {
        display: inline-block;
        padding: 1px 5px;
        margin: 0 2px;
        font-size: 0.85em;
        font-family: monospace;
        background-color: #f7f7f7;
        color: #0c0c0c;
        font-weight: bold;
        border: 1px solid #ccc;
        border-radius: 3px;
        box-shadow: 0 1px 0 rgba(0,0,0,0.2);
      }
    </style>
  </head>

  <body>
    <nav class="navbar">
      <div class="logo">
        <a href="{{ url_for('index') }}">
          <span>Gnosis Wraith <span id="flying-ghost" class="ghost-emoji" title="Click me or press Ctrl+G to make me fly!">ðŸ‘»</span></span>
        </a>
      </div>
      <ul class="nav-menu">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle">
            <i class="fas fa-bars"></i>
          </a>
          <ul class="dropdown-menu">
            <li><a href="{{ url_for('list_reports') }}">Reportage</a></li>
            <li><a href="{{ url_for('settings') }}">Settings</a></li>
          </ul>
        </li>
      </ul>
    </nav>

    <!-- Ghost animation styles and script -->
    <style>
      .ghost-emoji {
        display: inline-block;
        position: relative;
        transition: transform 0.2s ease;
        z-index: 2;
      }
      
      /* Multiple flight patterns */
      @keyframes flyRight {
        0% {
          transform: translateX(0) translateY(0) scale(1);
          opacity: 1;
        }
        
        /* Move steadily first */
        40% {
          transform: translateX(calc(30vw)) translateY(0) scale(1);
          opacity: 1;
        }
        
        /* Accelerate and start fading */
        80% {
          transform: translateX(calc(70vw)) translateY(0) scale(0.9);
          opacity: 0.7;
        }
        
        /* Final acceleration and fade out */
        100% {
          transform: translateX(calc(110vw)) translateY(0) scale(0.7);
          opacity: 0;
        }
      }
      
      @keyframes flyUp {
        0% {
          transform: translateX(0) translateY(0) scale(1);
          opacity: 1;
        }
        
        /* Float up slowly first */
        40% {
          transform: translateX(20px) translateY(-20vh) scale(1);
          opacity: 1;
        }
        
        /* Continue rising and fading */
        80% {
          transform: translateX(40px) translateY(-60vh) scale(0.9);
          opacity: 0.6;
        }
        
        /* Final fade out off the top */
        100% {
          transform: translateX(60px) translateY(-110vh) scale(0.7);
          opacity: 0;
        }
      }
      
      @keyframes flyLeft {
        0% {
          transform: translateX(0) translateY(0) scale(1);
          opacity: 1;
        }
        
        /* Move steadily first */
        40% {
          transform: translateX(-30vw) translateY(0) scale(1);
          opacity: 1;
        }
        
        /* Accelerate and start fading */
        80% {
          transform: translateX(-70vw) translateY(0) scale(0.9);
          opacity: 0.7;
        }
        
        /* Final acceleration and fade out */
        100% {
          transform: translateX(-110vw) translateY(0) scale(0.7);
          opacity: 0;
        }
      }
      
      @keyframes fadeOut {
        0% {
          transform: scale(1);
          opacity: 1;
        }
        
        50% {
          transform: scale(1.1);
          opacity: 0.8;
        }
        
        100% {
          transform: scale(0.5);
          opacity: 0;
        }
      }
      
      .ghost-flying {
        position: fixed;
        z-index: 999;
      }
      
      .ghost-flying-right {
        animation: flyRight 2.5s cubic-bezier(0.33, 1, 0.68, 1) forwards;
      }
      
      .ghost-flying-left {
        animation: flyLeft 2.5s cubic-bezier(0.33, 1, 0.68, 1) forwards;
      }
      
      .ghost-flying-up {
        animation: flyUp 3s cubic-bezier(0.33, 1, 0.68, 1) forwards;
      }
      
      .ghost-flying-fade {
        animation: fadeOut 2s cubic-bezier(0.33, 1, 0.68, 1) forwards;
      }
      
      /* Prevent ghost animation from messing with layout */
      .ghost-placeholder {
        opacity: 0;
        visibility: hidden;
      }
    </style>
    
    <script>
      // Wait until DOM is loaded
      document.addEventListener('DOMContentLoaded', function() {
        const ghost = document.getElementById('flying-ghost');
        if (!ghost) return;
        
        // Clean up any existing ghost clones (in case of page refresh during animation)
        const existingClones = document.querySelectorAll('[id^="flying-ghost-clone"]');
        existingClones.forEach(clone => {
          try {
            document.body.removeChild(clone);
          } catch (e) {
            console.log("Error removing clone:", e);
          }
        });
        
        // Function to make the ghost fly
        function makeGhostFly() {
          // Don't start a new animation if one is in progress
          if (document.querySelector('[id^="flying-ghost-clone"]')) return;
          
          // Create a clone to animate (this prevents layout shifts)
          const ghostClone = ghost.cloneNode(true);
          const cloneId = 'flying-ghost-clone-' + Date.now();
          ghostClone.id = cloneId;
          document.body.appendChild(ghostClone);
          
          // Position the clone exactly where the original ghost is
          const ghostRect = ghost.getBoundingClientRect();
          ghostClone.style.position = 'fixed';
          ghostClone.style.top = ghostRect.top + 'px';
          ghostClone.style.left = ghostRect.left + 'px';
          ghostClone.style.zIndex = '999';
          
          // Make the ghost temporarily invisible (but maintain space)
          ghost.classList.add('ghost-placeholder');
          
          // Choose a random flight pattern
          ghostClone.classList.add('ghost-flying');
          const flightPatterns = ['ghost-flying-right', 'ghost-flying-left', 'ghost-flying-up', 'ghost-flying-fade'];
          const randomPattern = flightPatterns[Math.floor(Math.random() * flightPatterns.length)];
          ghostClone.classList.add(randomPattern);
          
          // Set animation duration based on the pattern
          let animationDuration = 0;
          switch(randomPattern) {
            case 'ghost-flying-right':
            case 'ghost-flying-left':
              animationDuration = 2500; // 2.5 seconds
              break;
            case 'ghost-flying-up':
              animationDuration = 3000; // 3 seconds
              break;
            case 'ghost-flying-fade':
              animationDuration = 2000; // 2 seconds
              break;
            default:
              animationDuration = 3000; // Default 3 seconds
          }
          
          // Clean up after animation
          ghostClone.addEventListener('animationend', () => cleanupGhost(cloneId, animationDuration));
          
          // Backup cleanup in case the animationend event doesn't fire
          const cleanupTimeout = setTimeout(() => cleanupGhost(cloneId, animationDuration), animationDuration + 1000);
          
          function cleanupGhost(id, duration) {
            // Prevent duplicate cleanup
            const cloneElement = document.getElementById(id);
            if (!cloneElement) return;
            
            clearTimeout(cleanupTimeout);
            
            // Remove the clone
            try {
              document.body.removeChild(cloneElement);
            } catch (e) {
              console.log("Error removing clone:", e);
            }
            
            // Make the original ghost visible again, but after a short delay
            // to prevent any visual "bounce back" effect
            setTimeout(() => {
              ghost.classList.remove('ghost-placeholder');
              
              // Add a small wiggle effect as the ghost "reappears"
              ghost.style.animation = 'wiggle 0.5s ease';
              setTimeout(() => {
                ghost.style.animation = '';
              }, 500);
            }, 100);
          }
        }
        
        // Add a wiggle effect for when the ghost reappears
        const style = document.createElement('style');
        style.textContent = `
          @keyframes wiggle {
            0% { transform: translateX(0) rotate(0); }
            25% { transform: translateX(-3px) rotate(-5deg); }
            50% { transform: translateX(3px) rotate(5deg); }
            75% { transform: translateX(-2px) rotate(-3deg); }
            100% { transform: translateX(0) rotate(0); }
          }
        `;
        document.head.appendChild(style);
        
        // Start random ghost flights
        function scheduleRandomFlight() {
          // Random time between 3 and 8 minutes (180000 - 480000 ms)
          // But occasionally (5% chance) appear quickly (3-10 seconds)
          let randomDelay;
          
          if (Math.random() < 0.05) {
            // Quick reappearance (5% chance)
            randomDelay = Math.floor(Math.random() * 7000) + 3000; // 3-10 seconds
            console.log("Ghost will reappear quickly in " + (randomDelay/1000) + " seconds");
          } else {
            // Normal long delay
            randomDelay = Math.floor(Math.random() * 300000) + 180000; // 3-8 minutes
            console.log("Ghost will hibernate for " + (randomDelay/60000).toFixed(1) + " minutes");
          }
          
          setTimeout(() => {
            makeGhostFly();
            scheduleRandomFlight(); // Schedule the next flight
          }, randomDelay);
        }
        
        // Also trigger on clicking the ghost
        ghost.addEventListener('click', function(e) {
          // Don't navigate when clicking the ghost
          e.preventDefault();
          e.stopPropagation();
          makeGhostFly();
        });
        
        // Add keyboard shortcut: Ctrl+G to trigger ghost flight
        document.addEventListener('keydown', function(e) {
          // Check if Ctrl+G is pressed
          if (e.ctrlKey && (e.key === 'g' || e.key === 'G')) {
            // Prevent default browser behavior (which might be "find next")
            e.preventDefault();
            
            // Log to console to verify shortcut is working
            console.log("Ctrl+G shortcut detected - ghost should fly now!");
            
            // Force immediate ghost flight
            makeGhostFly();
            
            // Return false to ensure the browser doesn't handle this key combination
            return false;
          }
        });
        
        // Start the random flight scheduling
        scheduleRandomFlight();
      });
    </script>

    <div class="container">
      <div class="tabs">
        <button class="tab-btn active" data-tab="single-crawl">
          Search & Crawl
        </button>
        <button class="tab-btn" data-tab="extension">Browser Extension</button>
        <button class="tab-btn" data-tab="code-examples">Code Examples</button>
        <button class="tab-btn" data-tab="crawl-philosophy">
          Crawl Philosophy
        </button>
      </div>

      <main>
        <!-- Single URL Crawl Tab with JavaScript Option -->
        <section id="single-crawl" class="tab-content card active">
          <div class="author-quote">
            <blockquote>
              "The difference between ignorant and educated people is that the
              latter know more facts. But that has nothing to do with whether
              they are stupid or intelligent."
              <cite>â€”Neal Stephenson, The Diamond Age</cite>
            </blockquote>
          </div>
          
          <div id="crawl-status" class="status-box" style="display: none">
            <p>Status: <span id="status-text">Idle</span></p>
            <div class="progress-bar">
              <div id="progress-indicator"></div>
            </div>
          </div>
          
          <!-- New Google-inspired UI with fun controls -->
          <style>
            /* Google-inspired search styling */
            .ghost-search-container {
              max-width: 750px;
              margin: 0 auto;
              padding: 20px 0;
            }
            
            .ghost-search-box {
              display: flex;
              align-items: center;
              border: 1px solid var(--border-color);
              border-radius: 24px;
              padding: 6px 8px 6px 16px;
              box-shadow: 0 2px 5px rgba(0,0,0,0.1);
              background: var(--card-bg);
              transition: all 0.3s ease;
            }
            
            .ghost-search-box:focus-within,
            .ghost-search-box.highlight {
              box-shadow: 0 2px 10px rgba(108, 99, 255, 0.3);
              border-color: #6c63ff;
            }
            
            .ghost-search-box input {
              flex-grow: 1;
              border: none;
              padding: 12px 0;
              font-size: 16px;
              background: transparent;
              color: var(--text-color);
              outline: none;
            }
            
            .ghost-search-icon {
              color: #6c63ff;
              font-size: 20px;
              margin-right: 10px;
            }
            
            .ghost-search-button {
              display: flex;
              align-items: center;
              justify-content: center;
              width: 40px;
              height: 40px;
              border-radius: 50%;
              background: #6c63ff;
              color: white;
              border: none;
              cursor: pointer;
              transition: all 0.2s;
            }
            
            .ghost-search-button:hover {
              background: #5a52d5;
              transform: scale(1.05);
            }
            
            .ghost-mic-button,
            .ghost-file-button {
              background: transparent;
              border: none;
              width: 24px;
              height: 24px;
              margin-right: 8px;
              cursor: pointer;
              color: #5a52d5;
            }
            
            .ghost-file-button:hover {
              color: #6c63ff;
            }
            
            /* Style for file selected state */
            .file-selected {
              color: #6c63ff !important;
              font-weight: 500;
            }
            
            /* Custom toggles and controls */
            .ghost-controls {
              display: grid;
              grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
              gap: 20px;
              margin-top: 30px;
            }
            
            .ghost-control-card {
              background: var(--card-bg);
              border-radius: 12px;
              padding: 15px;
              box-shadow: 0 2px 5px rgba(0,0,0,0.05);
              transition: all 0.3s;
            }
            
            .ghost-control-card:hover {
              box-shadow: 0 4px 12px rgba(0,0,0,0.08);
              transform: translateY(-2px);
            }
            
            .ghost-control-header {
              display: flex;
              align-items: center;
              margin-bottom: 10px;
            }
            
            .ghost-control-icon {
              width: 32px;
              height: 32px;
              display: flex;
              align-items: center;
              justify-content: center;
              background: #f0f4ff;
              color: #6c63ff;
              border-radius: 8px;
              margin-right: 10px;
            }
            
            .ghost-control-title {
              font-size: 15px;
              font-weight: 500;
              color: var(--text-color);
              margin: 0;
            }
            
            /* Toggle Switch */
            .ghost-toggle-switch {
              position: relative;
              display: inline-block;
              width: 50px;
              height: 24px;
            }
            
            .ghost-toggle-switch input {
              opacity: 0;
              width: 0;
              height: 0;
            }
            
            .ghost-toggle-slider {
              position: absolute;
              cursor: pointer;
              top: 0;
              left: 0;
              right: 0;
              bottom: 0;
              background-color: #ccc;
              transition: .4s;
              border-radius: 34px;
            }
            
            .ghost-toggle-slider:before {
              position: absolute;
              content: "";
              height: 16px;
              width: 16px;
              left: 4px;
              bottom: 4px;
              background-color: white;
              transition: .4s;
              border-radius: 50%;
            }
            
            input:checked + .ghost-toggle-slider {
              background-color: #6c63ff;
            }
            
            input:checked + .ghost-toggle-slider:before {
              transform: translateX(26px);
            }
            
            /* Radio Button Group */
            .ghost-radio-group {
              display: flex;
              background: var(--card-bg);
              border-radius: 20px;
              padding: 4px;
              margin-top: 10px;
              border: 3px solid #ffffff; /* Thick white border for the entire group */
              box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            }
            
            .ghost-radio-button {
              flex: 1;
              text-align: center;
              padding: 8px 4px;
              font-size: 13px;
              cursor: pointer;
              border-radius: 14px;
              transition: all 0.2s;
              user-select: none;
              font-weight: 500; /* Medium weight for all states */
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              min-height: 45px; /* Ensure enough height for the two lines */
              line-height: 1.3;
              margin: 2px;
              border: none; /* No border on individual buttons */
            }
            
            .ghost-radio-active {
              background: #6c63ff;
              color: white;
              font-weight: 600; /* Slightly bolder for the active state */
              box-shadow: 0 2px 4px rgba(108, 99, 255, 0.3);
            }

            .ghost-radio-button:not(.ghost-radio-active) {
              background: var(--card-bg);
              color: #999; /* Much lighter text color for inactive buttons */
            }
            
            .ghost-radio-button:hover:not(.ghost-radio-active) {
              background: rgba(108, 99, 255, 0.1);
              color: #666; /* Slightly darker on hover, but still light */
            }
            
            /* Title Input Toggle styles have been removed */
            
            /* Submit button */
            .ghost-submit {
              display: flex;
              justify-content: center;
              margin-top: 30px;
            }
            
            .ghost-crawl-btn {
              background: linear-gradient(135deg, #6c63ff 0%, #5a52d5 100%);
              color: white;
              border: none;
              border-radius: 24px;
              padding: 12px 30px;
              font-size: 16px;
              font-weight: 500;
              cursor: pointer;
              transition: all 0.3s;
              box-shadow: 0 4px 15px rgba(108, 99, 255, 0.3);
              display: flex;
              align-items: center;
            }
            
            .ghost-crawl-btn:hover {
              transform: translateY(-2px);
              box-shadow: 0 6px 20px rgba(108, 99, 255, 0.4);
            }
            
            .ghost-crawl-btn i {
              margin-right: 10px;
            }
            
            /* Report title input styling */
            .ghost-input {
              border: 1px solid var(--border-color);
              border-radius: 8px;
              padding: 12px;
              background: var(--input-bg);
              color: var(--text-color);
              font-size: 14px;
              transition: all 0.3s;
              width: 100%;
            }
            
            .ghost-input:focus {
              border-color: #6c63ff;
              box-shadow: 0 0 0 2px rgba(108, 99, 255, 0.2);
              outline: none;
            }
            
            .ghost-input::placeholder {
              color: #999;
            }
            
            /* Report title container animation */
            #report-title-container {
              max-height: 0;
              overflow: hidden;
              transition: max-height 0.4s ease-out, padding 0.4s ease-out, opacity 0.4s ease-out;
              opacity: 0;
              margin: 0;
            }
            
            #report-title-container.visible,
            #upload-report-title-container.visible {
              max-height: 180px; /* Increased from 60px to allow more space */
              padding: 15px 0;
              margin-bottom: 10px;
              opacity: 1;
            }
            
            /* Add animation to upload section too */
            #upload-report-title-container {
              max-height: 0;
              overflow: hidden;
              transition: max-height 0.4s ease-out, padding 0.4s ease-out, opacity 0.4s ease-out;
              opacity: 0;
              margin: 0;
            }
            
            /* Retro Google feeling */
            .ghost-search-footer {
              text-align: center;
              margin-top: 30px;
              color: #666;
              font-size: 13px;
            }
            
            /* Fancy animation effects */
            @keyframes pulse {
              0% { transform: scale(1); }
              50% { transform: scale(1.05); }
              100% { transform: scale(1); }
            }
            
            .pulse-animation {
              animation: pulse 1.5s infinite ease-in-out;
            }
            
            /* Ghost link styling */
            .ghost-link {
              color: #8CB4FF; /* Lighter blue for better contrast on dark backgrounds */
              text-decoration: none !important; /* Remove underline */
              cursor: pointer;
              transition: all 0.2s ease;
              font-weight: 500;
            }
            
            .ghost-link:hover {
              color: #A9CBFF; /* Even lighter blue for hover state */
              text-decoration: none !important;
            }
          </style>
          
          <div class="crawl-form">
            <!-- Google-style search input -->
            <div class="ghost-search-container">
              <div class="ghost-search-box">
                <i class="fas fa-ghost ghost-search-icon"></i>
                <input
                  type="text"
                  id="url"
                  placeholder="Describe what you want to crawl, upload a file, or enter a URL..."
                  autocomplete="off"
                />
                <button class="ghost-mic-button" title="Search by voice">
                  <i class="fas fa-microphone"></i>
                </button>
                <!-- Add a file selection button here -->
                <button class="ghost-file-button" title="Select file to analyze" id="main-file-select-btn" style="position: relative; z-index: 1;">
                  <i class="fas fa-file-upload"></i>
                  <span style="position: absolute; width: 32px; height: 32px; background-color: rgba(108, 99, 255, 0.2); border-radius: 50%; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: -1;"></span>
                </button>
                <!-- Add X button to clear file selection, hidden by default -->
                <button class="ghost-clear-button" title="Remove selected file" id="clear-file-btn" style="display: none; background: transparent; border: none; width: 24px; height: 24px; margin-right: 8px; cursor: pointer; color: #ff6161;">
                  <i class="fas fa-times-circle"></i>
                </button>
                <button id="instant-crawl" class="ghost-search-button" title="Feeling Lucky">
                  <i class="fas fa-bolt"></i>
                </button>
                <!-- Hidden file input for the file selection -->
                <input type="file" id="main-file-input" style="display: none;" accept="image/png,image/jpeg,image/jpg,image/gif,image/bmp,application/pdf" />
              </div>
              
              <p class="help-text" style="text-align: center; margin-top: 8px; line-height: 1.8;">
                Press <kbd>Ctrl</kbd>+<kbd>Y</kbd> for tech news
              </p>
              
              <!-- Report title section has been removed -->
              
              <!-- Fun controls in cards -->
              <div class="ghost-controls">
                <!-- Screenshot Card -->
                <div class="ghost-control-card">
                  <div class="ghost-control-header">
                    <div class="ghost-control-icon">
                      <i class="fas fa-camera"></i>
                    </div>
                    <label class="ghost-toggle-switch" style="margin-left: 8px; margin-right: 12px;">
                      <input type="checkbox" id="take-screenshot-toggle" checked>
                      <span class="ghost-toggle-slider"></span>
                    </label>
                    <h3 class="ghost-control-title">Screenshot Capture</h3>
                  </div>
                  <!-- Removed help text -->
                </div>
                
                <!-- OCR Card -->
                <div class="ghost-control-card">
                  <div class="ghost-control-header">
                    <div class="ghost-control-icon">
                      <i class="fas fa-eye"></i>
                    </div>
                    <label class="ghost-toggle-switch" style="margin-left: 8px; margin-right: 12px;">
                      <input type="checkbox" id="ocr-extraction-toggle">
                      <span class="ghost-toggle-slider"></span>
                    </label>
                    <h3 class="ghost-control-title">OCR Extraction</h3>
                  </div>
                  <!-- Removed help text -->
                </div>
                
                <!-- Content Processing Card -->
                <div class="ghost-control-card">
                  <div class="ghost-control-header">
                    <div class="ghost-control-icon">
                      <i class="fas fa-cogs"></i>
                    </div>
                    <h3 class="ghost-control-title">Content Processing</h3>
                  </div>
                  <div class="ghost-radio-group" id="markdown-radio-group">
                    <div class="ghost-radio-button ghost-radio-active" data-value="enhanced">
                      <i class="fas fa-magic"></i> Enhanced
                    </div>
                    <div class="ghost-radio-button" data-value="basic">
                      <i class="fas fa-file-alt" style="opacity: 0.6;"></i> Basic
                    </div>
                    <div class="ghost-radio-button" data-value="none">
                      <i class="fas fa-code" style="opacity: 0.6;"></i> Raw Text<br>
                      <span style="font-size: 10px; opacity: 0.6;">(from DOM)</span>
                    </div>
                  </div>
                </div>
                
                <!-- JavaScript Card -->
                <div class="ghost-control-card">
                  <div class="ghost-control-header">
                    <div class="ghost-control-icon">
                      <i class="fas fa-code"></i>
                    </div>
                    <label class="ghost-toggle-switch" style="margin-left: 8px; margin-right: 12px;">
                      <input type="checkbox" id="javascript-enabled-toggle">
                      <span class="ghost-toggle-slider"></span>
                    </label>
                    <h3 class="ghost-control-title">JavaScript</h3>
                  </div>
                  <!-- Removed help text -->
                </div>
              </div>
              
              <!-- Custom report title toggle and input (hidden by default) -->
              <div class="ghost-control-card" style="margin-bottom: 20px;">
                <div class="ghost-control-header">
                  <div class="ghost-control-icon">
                    <i class="fas fa-heading"></i>
                  </div>
                  <label class="ghost-toggle-switch" style="margin-left: 8px; margin-right: 12px;">
                    <input type="checkbox" id="report-title-toggle">
                    <span class="ghost-toggle-slider"></span>
                  </label>
                  <h3 class="ghost-control-title">Custom Report Title</h3>
                </div>
                <!-- Report title input (hidden by default) -->
                <div id="report-title-container" style="display: none;">
                  <div style="background: #f0f4ff; border-radius: 8px; padding: 15px; margin-top: 10px; margin-bottom: 5px; box-shadow: 0 2px 6px rgba(0,0,0,0.05);">
                    <input
                      type="text"
                      id="report-title"
                      placeholder="Web Crawl Report"
                      class="ghost-input"
                      style="display: block; width: 100%; margin-bottom: 10px;"
                    />
                    <p style="margin: 8px 0 0 0; font-size: 12px; color: #666; line-height: 1.4;">
                      <i class="fas fa-info-circle"></i> 
                      This title will appear at the top of generated reports
                    </p>
                  </div>
                </div>
              </div>
              
              <!-- Submit button -->
              <div class="ghost-submit">
                <button id="crawl-btn" class="ghost-crawl-btn">
                  <i class="fas fa-ghost pulse-animation"></i>
                  Unleash the Wraith
                </button>
              </div>
              
              <div class="ghost-search-footer">
                Gnosis Wraith ðŸ‘»
              </div>
            </div>
            
            <!-- Hidden fields to store actual values for form submission -->
            <select id="take-screenshot" style="display: none;">
              <option value="true" selected>Yes</option>
              <option value="false">No</option>
            </select>
            
            <select id="ocr-extraction" style="display: none;">
              <option value="true">Yes</option>
              <option value="false" selected>No</option>
            </select>
            
            <select id="markdown-extraction" style="display: none;">
              <option value="enhanced" selected>Enhanced</option>
              <option value="basic">Basic</option>
              <option value="none">None</option>
            </select>
            
            <select id="javascript-enabled-single" style="display: none;">
              <option value="false" selected>Disabled</option>
              <option value="true">Enabled</option>
            </select>
            
            <input type="hidden" id="report-title-hidden" name="report-title" value="">
          </div>
          
          <!-- JavaScript to handle the new UI controls -->
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              // Toggle switches
              document.getElementById('take-screenshot-toggle').addEventListener('change', function() {
                document.getElementById('take-screenshot').value = this.checked ? 'true' : 'false';
                
                // If screenshots disabled, disable OCR too
                if (!this.checked) {
                  document.getElementById('ocr-extraction-toggle').checked = false;
                  document.getElementById('ocr-extraction-toggle').disabled = true;
                  document.getElementById('ocr-extraction').value = 'false';
                } else {
                  document.getElementById('ocr-extraction-toggle').disabled = false;
                }
              });
              
              document.getElementById('ocr-extraction-toggle').addEventListener('change', function() {
                document.getElementById('ocr-extraction').value = this.checked ? 'true' : 'false';
              });
              
              document.getElementById('javascript-enabled-toggle').addEventListener('change', function() {
                document.getElementById('javascript-enabled-single').value = this.checked ? 'true' : 'false';
              });
              
              // Report title toggle with animation
              document.getElementById('report-title-toggle').addEventListener('change', function() {
                const reportTitleContainer = document.getElementById('report-title-container');
                if (this.checked) {
                  // First make it display block, then add the visible class for animation
                  reportTitleContainer.style.display = 'block';
                  // Force a reflow to ensure the display change is processed before adding the class
                  void reportTitleContainer.offsetWidth;
                  reportTitleContainer.classList.add('visible');
                } else {
                  // First remove the visible class for animation
                  reportTitleContainer.classList.remove('visible');
                  // Then hide it after the animation completes
                  setTimeout(() => {
                    reportTitleContainer.style.display = 'none';
                  }, 400); // Match the transition duration in CSS (0.4s)
                }
              });
              
              // Radio group for markdown extraction
              document.querySelectorAll('#markdown-radio-group .ghost-radio-button').forEach(button => {
                button.addEventListener('click', function() {
                  // Remove active class from all buttons
                  document.querySelectorAll('#markdown-radio-group .ghost-radio-button').forEach(b => {
                    b.classList.remove('ghost-radio-active');
                    // Make icons slightly transparent for inactive buttons
                    b.querySelector('i').style.opacity = '0.6';
                  });
                  
                  // Add active class to clicked button
                  this.classList.add('ghost-radio-active');
                  // Make icon fully opaque for active button
                  this.querySelector('i').style.opacity = '1';
                  
                  // Set value in hidden select
                  document.getElementById('markdown-extraction').value = this.getAttribute('data-value');
                });
              });
              
              // Handle hover effects for the radio buttons
              document.querySelectorAll('#markdown-radio-group .ghost-radio-button').forEach(button => {
                button.addEventListener('mouseenter', function() {
                  if (!this.classList.contains('ghost-radio-active')) {
                    this.querySelector('i').style.opacity = '0.8';
                  }
                });
                
                button.addEventListener('mouseleave', function() {
                  if (!this.classList.contains('ghost-radio-active')) {
                    this.querySelector('i').style.opacity = '0.6';
                  }
                });
              });
              
              // Report title toggle removed (using the animated version below)
              
              // "Feeling Lucky" button
              document.getElementById('instant-crawl').addEventListener('click', function() {
                const urlInput = document.getElementById('url');
                if (!urlInput.value) {
                  urlInput.value = 'https://news.ycombinator.com/';
                }
                document.getElementById('crawl-btn').click();
              });
              
              // Voice input effect (simulated)
              document.querySelector('.ghost-mic-button').addEventListener('click', function() {
                const urlInput = document.getElementById('url');
                urlInput.placeholder = 'Listening...';
                
                // Simulate voice recognition after 2 seconds
                setTimeout(() => {
                  urlInput.value = 'https://news.ycombinator.com/';
                  urlInput.placeholder = 'Enter a URL or describe what you want to crawl...';
                }, 2000);
              });
              
              // Ghost links handler - updated to work with predefined URLs
              document.querySelectorAll('.ghost-link').forEach(link => {
                link.addEventListener('click', function(e) {
                  e.preventDefault();
                  
                  // Get the query from the data attribute
                  const query = this.getAttribute('data-query');
                  const urlInput = document.getElementById('url');
                  
                  if (urlInput) {
                    // Populate the URL input with the query
                    urlInput.value = query;
                    
                    // Highlight the input to show it was populated
                    urlInput.classList.add('highlight-input');
                    setTimeout(() => {
                      urlInput.classList.remove('highlight-input');
                    }, 500);
                    
                    // Always submit immediately for these example links
                    setTimeout(() => {
                      const crawlBtn = document.getElementById('crawl-btn');
                      if (crawlBtn) {
                        crawlBtn.click();
                      }
                    }, 300);
                  }
                });
              });
              
              // Image upload report title toggle with animation
              const uploadReportTitleToggle = document.getElementById('upload-report-title-toggle');
              if (uploadReportTitleToggle) {
                uploadReportTitleToggle.addEventListener('change', function() {
                  const container = document.getElementById('upload-report-title-container');
                  if (container) {
                    if (this.checked) {
                      // First make it display block, then add the visible class for animation
                      container.style.display = 'block';
                      // Force a reflow to ensure the display change is processed before adding the class
                      void container.offsetWidth;
                      container.classList.add('visible');
                    } else {
                      // First remove the visible class for animation
                      container.classList.remove('visible');
                      // Then hide it after the animation completes
                      setTimeout(() => {
                        container.style.display = 'none';
                      }, 400); // Match the transition duration in CSS
                    }
                  }
                });
              }
            });
          </script>
        </section>

        <!-- Image Upload Tab removed -->

        <!-- Code Examples Tab with Ask Wraith section -->
        <section id="code-examples" class="tab-content card">
          <div class="author-quote">
            <blockquote>
              "I'm going to kill you with my teacup."
              <cite>â€”Richard B. Riddick, The Chronicles of Riddick</cite>
            </blockquote>
          </div>
          
          <!-- Empty line to maintain structure but removing the original Ask Wraith content since it's moved -->
          
          <!-- OS detection script -->
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              // Try to detect OS
              const userAgent = navigator.userAgent.toLowerCase();
              const isMac = /macintosh|mac os x/i.test(userAgent);
              const isWindows = /windows|win32|win64/i.test(userAgent);
              
              // Set default for unknown OS (show Linux/Mac)
              let showWindows = false;
              
              if (isWindows) {
                showWindows = true;
              }
              
              // Get tab elements
              const macTab = document.getElementById('mac-tab');
              const winTab = document.getElementById('windows-tab');
              const textInputTab = document.getElementById('text-input-tab');
              const macExamples = document.getElementById('mac-examples');
              const winExamples = document.getElementById('windows-examples');
              const textInputExamples = document.getElementById('text-input-examples');
              
              // Initial state based on detected OS
              if (showWindows) {
                macTab.classList.remove('active');
                winTab.classList.add('active');
                textInputTab.classList.remove('active');
                macExamples.style.display = 'none';
                winExamples.style.display = 'block';
                textInputExamples.style.display = 'none';
              } else {
                macTab.classList.add('active');
                winTab.classList.remove('active');
                textInputTab.classList.remove('active');
                macExamples.style.display = 'block';
                winExamples.style.display = 'none';
                textInputExamples.style.display = 'none';
              }
              
              // Tab switching logic
              macTab.addEventListener('click', function() {
                macTab.classList.add('active');
                winTab.classList.remove('active');
                textInputTab.classList.remove('active');
                macExamples.style.display = 'block';
                winExamples.style.display = 'none';
                textInputExamples.style.display = 'none';
              });
              
              winTab.addEventListener('click', function() {
                macTab.classList.remove('active');
                winTab.classList.add('active');
                textInputTab.classList.remove('active');
                macExamples.style.display = 'none';
                winExamples.style.display = 'block';
                textInputExamples.style.display = 'none';
              });
              
              textInputTab.addEventListener('click', function() {
                macTab.classList.remove('active');
                winTab.classList.remove('active');
                textInputTab.classList.add('active');
                macExamples.style.display = 'none';
                winExamples.style.display = 'none';
                textInputExamples.style.display = 'block';
              });
              
              // Text Input functionality
              const codeTextInput = document.getElementById('code-text-input');
              const clearTextBtn = document.getElementById('clear-text-btn');
              const copyTextBtn = document.getElementById('copy-text-btn');
              const saveTextBtn = document.getElementById('save-text-btn');
              
              if (clearTextBtn) {
                clearTextBtn.addEventListener('click', function() {
                  if (codeTextInput) {
                    codeTextInput.value = '';
                    codeTextInput.focus();
                  }
                });
              }
              
              if (copyTextBtn) {
                copyTextBtn.addEventListener('click', function() {
                  if (codeTextInput && codeTextInput.value.trim()) {
                    navigator.clipboard.writeText(codeTextInput.value).then(() => {
                      // Provide visual feedback
                      const originalText = copyTextBtn.innerHTML;
                      copyTextBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                      setTimeout(() => {
                        copyTextBtn.innerHTML = originalText;
                      }, 2000);
                    }).catch(err => {
                      console.error('Failed to copy text:', err);
                      const originalText = copyTextBtn.innerHTML;
                      copyTextBtn.innerHTML = '<i class="fas fa-times"></i> Failed';
                      setTimeout(() => {
                        copyTextBtn.innerHTML = originalText;
                      }, 2000);
                    });
                  }
                });
              }
              
              if (saveTextBtn) {
                saveTextBtn.addEventListener('click', function() {
                  if (codeTextInput && codeTextInput.value.trim()) {
                    try {
                      // Create a blob with the text content
                      const blob = new Blob([codeTextInput.value], { type: 'text/plain' });
                      const url = URL.createObjectURL(blob);
                      
                      // Create a temporary link element to trigger download
                      const a = document.createElement('a');
                      a.href = url;
                      a.download = 'gnosis_wraith_text_' + Date.now() + '.txt';
                      document.body.appendChild(a);
                      a.click();
                      
                      // Clean up
                      document.body.removeChild(a);
                      URL.revokeObjectURL(url);
                      
                      // Provide visual feedback
                      const originalText = saveTextBtn.innerHTML;
                      saveTextBtn.innerHTML = '<i class="fas fa-check"></i> Saved!';
                      setTimeout(() => {
                        saveTextBtn.innerHTML = originalText;
                      }, 2000);
                    } catch (err) {
                      console.error('Failed to save text:', err);
                      const originalText = saveTextBtn.innerHTML;
                      saveTextBtn.innerHTML = '<i class="fas fa-times"></i> Failed';
                      setTimeout(() => {
                        saveTextBtn.innerHTML = originalText;
                      }, 2000);
                    }
                  }
                });
              }
            });
          </script>
          
          <!-- Styled OS tabs -->
          <div class="os-tabs" style="display: flex; margin-bottom: 20px; border-bottom: 1px solid var(--border-color);">
            <div id="mac-tab" class="os-tab active" style="padding: 10px 20px; cursor: pointer; border-bottom: 2px solid transparent;">
              <i class="fab fa-apple"></i> macOS / Linux
            </div>
            <div id="windows-tab" class="os-tab" style="padding: 10px 20px; cursor: pointer; border-bottom: 2px solid transparent;">
              <i class="fab fa-windows"></i> Windows PowerShell
            </div>
            <div id="text-input-tab" class="os-tab" style="padding: 10px 20px; cursor: pointer; border-bottom: 2px solid transparent;">
              <i class="fas fa-wand-magic-sparkles"></i> Ask Wraith
            </div>
          </div>
          
          <!-- Add this right after the OS tabs section -->
          <div id="text-input-examples" style="display: none;">
  
            <!-- Search box for code examples -->
            <div class="ghost-search-box" style="max-width: 750px; margin: 0 auto 20px;">
              <i class="fas fa-code ghost-search-icon"></i>
              <input
                type="text"
                id="code-query"
                placeholder="What code would you like to see? (e.g., 'python web scraper with BeautifulSoup')"
                autocomplete="off"
              />
              <button id="ask-wraith-btn" class="ghost-search-button" title="Generate Code">
                <i class="fas fa-wand-magic-sparkles"></i>
              </button>
            </div>
            
            <!-- Code output container with shimmer effect -->
            <div id="code-output-container" class="code-container" style="position: relative; margin-top: 20px; border-radius: 8px; overflow: hidden;">
              <button class="copy-btn" title="Copy to clipboard">
                <i class="fas fa-copy"></i>
              </button>
              
              <pre class="code-block" id="code-output"><code class="language-python">#!/usr/bin/env python3
"""
Basic example of using the Gnosis Wraith API to crawl a website.
"""
import requests
import json

# URL of your Gnosis Wraith server
SERVER_URL = "http://localhost:5678"  # Change this to match your server

def crawl_website(url, take_screenshot=True, javascript_enabled=False):
    """
    Crawl a website using the Gnosis Wraith API.
    
    Args:
        url (str): The URL to crawl
        take_screenshot (bool): Whether to take a screenshot
        javascript_enabled (bool): Whether to enable JavaScript during crawling
        
    Returns:
        dict: The API response
    """
    endpoint = f"{SERVER_URL}/api/crawl"
    
    # Configure the request payload
    payload = {
        "url": url,
        "title": f"Crawl Report: {url}",
        "take_screenshot": take_screenshot,
        "javascript_enabled": javascript_enabled,
        "ocr_extraction": False,
        "markdown_extraction": "enhanced"
    }
    
    # Make the API request
    response = requests.post(endpoint, json=payload)
    
    # Check if the request was successful
    if response.status_code == 200:
        return response.json()
    else:
        print(f"Error: {response.status_code}")
        print(response.text)
        return {"success": False, "error": f"API request failed with status code {response.status_code}"}

def main():
    # Example usage
    url_to_crawl = "https://news.ycombinator.com/"
    print(f"Crawling {url_to_crawl}...")
    
    # Call the API
    result = crawl_website(url_to_crawl)
    
    # Check if the crawl was successful
    if result.get("success"):
        print("Crawl successful!")
        
        # Print details about the results
        for item in result.get("results", []):
            print(f"\nTitle: {item.get('title', 'No title')}")
            
            # Check if a screenshot was taken
            if "screenshot" in item:
                print(f"Screenshot: {SERVER_URL}/screenshots/{item['screenshot']}")
            
            # Print a snippet of the extracted text if available
            if "extracted_text" in item:
                text_preview = item["extracted_text"][:100] + "..." if len(item["extracted_text"]) > 100 else item["extracted_text"]
                print(f"Text preview: {text_preview}")
        
        # Print the report URL if available
        if "report_path" in result:
            print(f"\nFull report: {SERVER_URL}/reports/{result['report_path']}")
            print(f"HTML report: {SERVER_URL}/reports/{result['report_path'].replace('.md', '.html')}")
    else:
        print(f"Crawl failed: {result.get('error', 'Unknown error')}")

if __name__ == "__main__":
    main()</code></pre>
            </div>
            
            <div class="text-input-controls" style="margin-top: 20px;">
              <div>
                <button class="text-input-btn clear" id="clear-text-btn">
                  <i class="fas fa-trash-alt"></i> Clear
                </button>
              </div>
              <div>
                <button class="text-input-btn" id="copy-text-btn">
                  <i class="fas fa-copy"></i> Copy
                </button>
                <button class="text-input-btn" id="save-text-btn" style="margin-left: 10px; width: auto;">
                  <i class="fas fa-save"></i> Save
                </button>
              </div>
            </div>
          </div>
          
          <style>
            .os-tab.active {
              border-bottom-color: #6c63ff !important;
              color: #6c63ff;
              font-weight: bold;
            }
            
            .text-input-container {
              padding: 15px;
              background-color: var(--card-bg);
              border-radius: 8px;
              margin-bottom: 20px;
            }
            
            .text-input-container textarea {
              width: 100%;
              min-height: 200px;
              font-family: 'Consolas', 'Monaco', monospace;
              font-size: 14px;
              line-height: 1.5;
              padding: 15px;
              border-radius: 5px;
              border: 1px solid var(--border-color);
              background-color: #1e1e1e;
              color: #d4d4d4;
              resize: vertical;
            }
            
            .text-input-controls {
              display: flex;
              justify-content: space-between;
              margin-top: 10px;
            }
            
            .text-input-btn {
              background-color: #6c63ff;
              color: white;
              border: none;
              border-radius: 4px;
              padding: 8px 16px;
              cursor: pointer;
              font-weight: 500;
              transition: all 0.2s;
              width: auto;
              max-width: 120px;
              white-space: nowrap;
              overflow: hidden;
              text-overflow: ellipsis;
            }
            
            .text-input-btn:hover {
              background-color: #5a52d5;
            }
            
            .text-input-btn.clear {
              background-color: #f1f1f1;
              color: #333;
            }
            
            .text-input-btn.clear:hover {
              background-color: #e0e0e0;
            }
            
            .copy-btn {
              position: absolute;
              top: 5px;
              right: 5px;
              background-color: rgba(108, 99, 255, 0.1);
              color: #6c63ff;
              border: none;
              border-radius: 4px;
              padding: 5px 8px;
              cursor: pointer;
              z-index: 10;
              transition: all 0.2s;
            }
            
            .copy-btn:hover {
              background-color: rgba(108, 99, 255, 0.2);
            }
            
            .copy-btn.copied {
              background-color: rgba(92, 184, 92, 0.2);
              color: #5cb85c;
            }
            
            pre.code-block {
              background-color: #1e1e1e;
              color: #d4d4d4;
              padding: 15px;
              border-radius: 5px;
              overflow-x: auto;
              position: relative;
              margin: 15px 0;
              font-family: 'Consolas', 'Monaco', monospace;
              font-size: 14px;
              line-height: 1.5;
            }
            
            .example-section {
              margin-bottom: 30px;
            }
            
            .example-section h3 {
              margin-bottom: 10px;
            }
            
            .example-section p {
              margin-bottom: 15px;
            }
            
            .example-section .code-container {
              position: relative;
            }
          </style>
          
          <!-- Mac/Linux Examples -->
          <div id="mac-examples">
            <div class="example-section">
              <h3>Basic URL Crawl</h3>
              <p>Crawl a webpage and retrieve the processed content in markdown format:</p>
              <div class="code-container">
                <button class="copy-btn" title="Copy to clipboard">
                  <i class="fas fa-copy"></i>
                </button>
                <pre class="code-block">curl -X POST http://localhost:5678/api/crawl \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com",
    "markdown_extraction": "enhanced",
    "take_screenshot": true
  }'</pre>
              </div>
            </div>
            
            <div class="example-section">
              <h3>Upload an Image for OCR</h3>
              <p>Upload an image file and extract text using OCR:</p>
              <div class="code-container">
                <button class="copy-btn" title="Copy to clipboard">
                  <i class="fas fa-copy"></i>
                </button>
                <pre class="code-block">curl -X POST http://localhost:5678/api/upload \
  -F "image=@/path/to/your/image.png" \
  -F "title=My OCR Analysis"</pre>
              </div>
            </div>
            
            <div class="example-section">
              <h3>Advanced Crawl with JavaScript</h3>
              <p>Crawl a page with JavaScript rendering enabled and OCR extraction:</p>
              <div class="code-container">
                <button class="copy-btn" title="Copy to clipboard">
                  <i class="fas fa-copy"></i>
                </button>
                <pre class="code-block">curl -X POST http://localhost:5678/api/crawl \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com",
    "javascript_enabled": true,
    "take_screenshot": true,
    "ocr_extraction": true,
    "markdown_extraction": "enhanced",
    "title": "JavaScript-Rendered Content Analysis"
  }'</pre>
              </div>
            </div>
            
            <div class="example-section">
              <h3>Delete a Report</h3>
              <p>Delete a previously generated report:</p>
              <div class="code-container">
                <button class="copy-btn" title="Copy to clipboard">
                  <i class="fas fa-copy"></i>
                </button>
                <pre class="code-block">curl -X DELETE http://localhost:5678/api/reports/report_filename.md</pre>
              </div>
            </div>
          </div>
          
          <!-- Windows PowerShell Examples -->
          <div id="windows-examples" style="display: none;">
            <div class="example-section">
              <h3>Basic URL Crawl</h3>
              <p>Crawl a webpage and retrieve the processed content in markdown format:</p>
              <div class="code-container">
                <button class="copy-btn" title="Copy to clipboard">
                  <i class="fas fa-copy"></i>
                </button>
                <pre class="code-block">$body = @{
    url = "https://example.com"
    markdown_extraction = "enhanced"
    take_screenshot = $true
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:5678/api/crawl" -Method Post -Body $body -ContentType "application/json"</pre>
              </div>
            </div>
            
            <div class="example-section">
              <h3>Upload an Image for OCR</h3>
              <p>Upload an image file and extract text using OCR:</p>
              <div class="code-container">
                <button class="copy-btn" title="Copy to clipboard">
                  <i class="fas fa-copy"></i>
                </button>
                <pre class="code-block">$filePath = "C:\path\to\your\image.png"
$fileBytes = [System.IO.File]::ReadAllBytes($filePath)
$fileEnc = [System.Text.Encoding]::GetEncoding('UTF-8').GetString($fileBytes)
$boundary = [System.Guid]::NewGuid().ToString()
$LF = "`r`n"

$bodyLines = (
    "--$boundary",
    "Content-Disposition: form-data; name=`"image`"; filename=`"$(Split-Path $filePath -Leaf)`"",
    "Content-Type: application/octet-stream$LF",
    $fileEnc,
    "--$boundary",
    "Content-Disposition: form-data; name=`"title`"$LF",
    "My OCR Analysis",
    "--$boundary--$LF"
) -join $LF

Invoke-RestMethod -Uri "http://localhost:5678/api/upload" -Method Post -Body $bodyLines -ContentType "multipart/form-data; boundary=$boundary"</pre>
              </div>
            </div>
            
            <div class="example-section">
              <h3>Advanced Crawl with JavaScript</h3>
              <p>Crawl a page with JavaScript rendering enabled and OCR extraction:</p>
              <div class="code-container">
                <button class="copy-btn" title="Copy to clipboard">
                  <i class="fas fa-copy"></i>
                </button>
                <pre class="code-block">$body = @{
    url = "https://example.com"
    javascript_enabled = $true
    take_screenshot = $true
    ocr_extraction = $true
    markdown_extraction = "enhanced"
    title = "JavaScript-Rendered Content Analysis"
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:5678/api/crawl" -Method Post -Body $body -ContentType "application/json"</pre>
              </div>
            </div>
            
            <div class="example-section">
              <h3>Delete a Report</h3>
              <p>Delete a previously generated report:</p>
              <div class="code-container">
                <button class="copy-btn" title="Copy to clipboard">
                  <i class="fas fa-copy"></i>
                </button>
                <pre class="code-block">Invoke-RestMethod -Uri "http://localhost:5678/api/reports/report_filename.md" -Method Delete</pre>
              </div>
            </div>
          </div>
          
          <!-- Copy button functionality -->
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              const copyButtons = document.querySelectorAll('.copy-btn');
              copyButtons.forEach(button => {
                button.addEventListener('click', function() {
                  const codeBlock = this.nextElementSibling;
                  const codeText = codeBlock.textContent;
                  
                  navigator.clipboard.writeText(codeText).then(() => {
                    // Visual feedback
                    this.classList.add('copied');
                    
                    // Store original content
                    const originalHTML = this.innerHTML;
                    this.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    
                    // Revert after timeout
                    setTimeout(() => {
                      this.innerHTML = originalHTML;
                      this.classList.remove('copied');
                    }, 2000);
                  }).catch(err => {
                    console.error('Failed to copy code:', err);
                    this.innerHTML = '<i class="fas fa-times"></i> Failed';
                    
                    setTimeout(() => {
                      this.innerHTML = '<i class="fas fa-copy"></i>';
                    }, 2000);
                  });
                });
              });
            });
          </script>
        </section>

        <!-- Browser Extension Tab - UPDATED -->
        <section id="extension" class="tab-content card">
          <div class="author-quote">
            <blockquote>
              "The study of exobiology is indeed a worthwhile endeavor, but to
              predict beyond the data is illogical."
              <cite>â€”Data, Star Trek: The Next Generation</cite>
            </blockquote>
          </div>
          
          <!-- Ghost-style feature highlight -->
          <div class="ghost-search-container" style="max-width: 750px; margin: 0 auto; padding: 20px 0;">
            <!-- Ghost-style feature card -->
            <div class="ghost-control-card" style="margin-bottom: 25px; background: linear-gradient(135deg, rgba(108, 99, 255, 0.1) 0%, rgba(108, 99, 255, 0.05) 100%);">
              <div class="ghost-control-header">
                <div class="ghost-control-icon">
                  <i class="fas fa-rocket"></i>
                </div>
                <h3 class="ghost-control-title">New! DOM Capture Technology</h3>
              </div>
              <p style="margin: 15px 0 5px 0; line-height: 1.5;">
                Our extension now captures the complete DOM content directly from your browser, 
                ensuring what you see is exactly what gets processed - including all JavaScript-generated content!
              </p>
              
              <!-- Download button styled like the main crawl button -->
              <div style="text-align: center; margin-top: 20px;">
                <a
                  href="{{ url_for('static', filename='downloads/gnosis-wraith-extension-' + extension_version + '.zip') }}?v={{ extension_version }}"
                  class="ghost-crawl-btn"
                  download="gnosis-wraith-extension-{{ extension_version }}.zip"
                  style="text-decoration: none;"
                >
                  <i class="fas fa-download pulse-animation"></i>
                  Download Extension v{{ extension_version }}
                </a>
                <p style="margin-top: 10px; font-size: 13px; color: #666;">Latest version with DOM capture technology</p>
              </div>
            </div>

          <!-- Main Description with ghost-styled controls -->
          <div class="ghost-search-container" style="max-width: 850px; margin: 0 auto; padding: 20px 0;">
            <p style="text-align: center; margin-bottom: 25px; font-size: 16px;">
              The Gnosis Wraith browser extension enhances your data collection capabilities:
            </p>
            
            <!-- Ghost-style feature grid -->
            <div class="ghost-controls">
              <!-- Feature 1 -->
              <div class="ghost-control-card">
                <div class="ghost-control-header">
                  <div class="ghost-control-icon">
                    <i class="fas fa-camera"></i>
                  </div>
                  <h3 class="ghost-control-title">Screenshot Capture</h3>
                </div>
                <p style="margin-top: 10px; font-size: 14px;">
                  Capture full pages or visible areas with a single click or keyboard shortcut
                </p>
              </div>
              
              <!-- Feature 2 -->
              <div class="ghost-control-card">
                <div class="ghost-control-header">
                  <div class="ghost-control-icon">
                    <i class="fas fa-file-alt"></i>
                  </div>
                  <h3 class="ghost-control-title">Content Extraction</h3>
                </div>
                <p style="margin-top: 10px; font-size: 14px;">
                  Extract structured content from any webpage, preserving formatting and links
                </p>
              </div>
              
              <!-- Feature 3 -->
              <div class="ghost-control-card">
                <div class="ghost-control-header">
                  <div class="ghost-control-icon">
                    <i class="fas fa-brain"></i>
                  </div>
                  <h3 class="ghost-control-title">Intelligent Processing</h3>
                </div>
                <p style="margin-top: 10px; font-size: 14px;">
                  Auto-filter content to focus on what matters most in the page
                </p>
              </div>
              
              <!-- Feature 4 -->
              <div class="ghost-control-card">
                <div class="ghost-control-header">
                  <div class="ghost-control-icon">
                    <i class="fas fa-chart-line"></i>
                  </div>
                  <h3 class="ghost-control-title">Data Analysis</h3>
                </div>
                <p style="margin-top: 10px; font-size: 14px;">
                  Generate comprehensive reports with extracted text and metadata
                </p>
              </div>
              
              <!-- Feature 5 -->
              <div class="ghost-control-card">
                <div class="ghost-control-header">
                  <div class="ghost-control-icon">
                    <i class="fas fa-search-plus"></i>
                  </div>
                  <h3 class="ghost-control-title">Search & Discussion</h3>
                </div>
                <p style="margin-top: 10px; font-size: 14px;">
                  Save pages for later search or use in collaborative discussions
                </p>
              </div>
              
              <!-- Feature 6 -->
              <div class="ghost-control-card">
                <div class="ghost-control-header">
                  <div class="ghost-control-icon">
                    <i class="fas fa-robot"></i>
                  </div>
                  <h3 class="ghost-control-title">Intelligent Crawls</h3>
                </div>
                <p style="margin-top: 10px; font-size: 14px;">
                  Generate LLM summaries and insights from website content
                </p>
              </div>
            </div>
          </div>
          
          <!-- Ghost-style browser instructions -->
          <div class="ghost-search-container" style="max-width: 850px; margin: 0 auto; padding: 20px 0;">
            <div class="ghost-control-card" style="margin-bottom: 25px;">
              <div class="ghost-control-header">
                <div class="ghost-control-icon">
                  <i class="fas fa-download"></i>
                </div>
                <h3 class="ghost-control-title">Installation Instructions</h3>
              </div>
              
              <!-- Ghost-styled browser tabs -->
              <div class="ghost-radio-group" id="browser-radio-group" style="margin-top: 20px;">
                <div class="ghost-radio-button ghost-radio-active" data-browser="chrome">
                  <i class="fab fa-chrome"></i> Chrome
                </div>
                <div class="ghost-radio-button" data-browser="firefox">
                  <i class="fab fa-firefox"></i> Firefox
                </div>
                <div class="ghost-radio-button" data-browser="edge">
                  <i class="fab fa-edge"></i> Edge
                </div>
                <div class="ghost-radio-button" data-browser="safari">
                  <i class="fab fa-safari"></i> Safari
                </div>
              </div>
            
            <!-- Chrome Instructions -->
            <div class="browser-content active" id="chrome-instructions">
              <div class="browser-instructions">
                <h4><i class="fab fa-chrome"></i> Installing on Chrome/Chromium</h4>
                <ol style="padding-left: 25px; margin-top: 15px;">
                  <li>Click the <strong>"Download Extension"</strong> button above</li>
                  <li>When download completes, <strong>right-click</strong> on the file in your downloads bar and select "Show in folder" (Windows) or find it in your Downloads folder (Mac)</li>
                  <li>Extract the ZIP file by right-clicking and selecting "Extract All..." (Windows) or double-clicking (Mac)</li>
                  <li>In Chrome, navigate to <code style="background-color: var(--card-bg); color: var(--primary-color);">chrome://extensions/</code> by typing it in the address bar</li>
                  <li>Enable <strong>"Developer mode"</strong> using the toggle in the top-right corner</li>
                  <li>Click <strong>"Load unpacked"</strong> and select the folder where you extracted the extension</li>
                  <li>The extension icon should now appear in your browser toolbar</li>
                </ol>
              </div>
            </div>
            
            <!-- Firefox Instructions -->
            <div class="browser-content" id="firefox-instructions">
              <div class="browser-instructions">
                <h4><i class="fab fa-firefox"></i> Installing on Firefox</h4>
                <ol style="padding-left: 25px; margin-top: 15px;">
                  <li>Click the <strong>"Download Extension"</strong> button above</li>
                  <li>In Firefox, navigate to <code style="background-color: var(--card-bg); color: var(--primary-color);">about:debugging#/runtime/this-firefox</code> by typing it in the address bar</li>
                  <li>Click <strong>"Load Temporary Add-on..."</strong></li>
                  <li>Select the ZIP file you downloaded (no need to extract it)</li>
                  <li>The extension will be installed temporarily and will be removed when Firefox is closed</li>
                  <li><em>Note: For permanent installation, you'd need to package the extension for Firefox Web Store, which is not covered here</em></li>
                </ol>
              </div>
            </div>
            
            <!-- Edge Instructions -->
            <div class="browser-content" id="edge-instructions">
              <div class="browser-instructions">
                <h4><i class="fab fa-edge"></i> Installing on Edge</h4>
                <ol style="padding-left: 25px; margin-top: 15px;">
                  <li>Click the <strong>"Download Extension"</strong> button above</li>
                  <li>Extract the ZIP file to a folder</li>
                  <li>In Edge, navigate to <code style="background-color: var(--card-bg); color: var(--primary-color);">edge://extensions/</code> by typing it in the address bar</li>
                  <li>Enable <strong>"Developer mode"</strong> using the toggle in the left sidebar</li>
                  <li>Click <strong>"Load unpacked"</strong> and select the folder where you extracted the extension</li>
                  <li>The extension icon should now appear in your browser toolbar</li>
                </ol>
              </div>
            </div>
            
            <!-- Safari Instructions -->
            <div class="browser-content" id="safari-instructions">
              <div class="browser-instructions">
                <h4><i class="fab fa-safari"></i> Installing on Safari</h4>
                <p>We're currently not actively supporting Safari due to Apple's complex extension requirements and limited demand.</p>
                <p>Safari support would require:</p>
                <ul style="padding-left: 25px; margin-top: 15px;">
                  <li>Repackaging as a Safari Web Extension</li>
                  <li>Using Xcode to build and distribute</li>
                  <li>Going through the App Store approval process</li>
                </ul>
                <div class="note-box">
                  <p><i class="fas fa-sticky-note"></i> <em>Honestly, we probably won't implement Safari support until someone specifically complains about it. If you really need Safari support, please let us know!</em></p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Ghost-style keyboard shortcuts -->
          <div class="ghost-search-container" style="max-width: 850px; margin: 0 auto; padding: 20px 0;">
            <div class="ghost-control-card" style="margin-bottom: 25px;">
              <div class="ghost-control-header">
                <div class="ghost-control-icon">
                  <i class="fas fa-keyboard"></i>
                </div>
                <h3 class="ghost-control-title">Keyboard Shortcuts</h3>
              </div>
              
              <p style="margin: 15px 0 10px 0; font-size: 14px;">Once installed, you can use these keyboard shortcuts:</p>
              
              <div style="background: var(--card-bg); border-radius: 8px; padding: 15px; margin-top: 10px; margin-bottom: 5px; box-shadow: 0 2px 6px rgba(0,0,0,0.05);">
                <ul style="list-style-type: none; padding-left: 5px; margin: 0;">
                  <li style="margin-bottom: 12px; display: flex; align-items: center;">
                    <kbd>Alt</kbd> + <kbd>Shift</kbd> + <kbd>W</kbd> 
                    <span style="margin-left: 10px;">Capture screenshot and save locally</span>
                  </li>
                  <li style="margin-bottom: 12px; display: flex; align-items: center;">
                    <kbd>Alt</kbd> + <kbd>Shift</kbd> + <kbd>U</kbd>
                    <span style="margin-left: 10px;">Capture screenshot and upload for processing</span>
                  </li>
                  <li style="margin-bottom: 12px; display: flex; align-items: center;">
                    <kbd>Alt</kbd> + <kbd>Shift</kbd> + <kbd>F</kbd>
                    <span style="margin-left: 10px;">Capture full page screenshot and save locally</span>
                  </li>
                  <li style="margin-bottom: 12px; display: flex; align-items: center;">
                    <kbd>Alt</kbd> + <kbd>Shift</kbd> + <kbd>A</kbd>
                    <span style="margin-left: 10px;">Capture full page screenshot and upload for processing</span>
                  </li>
                  <li style="margin-bottom: 0; display: flex; align-items: center;">
                    <kbd>Alt</kbd> + <kbd>Shift</kbd> + <kbd>D</kbd>
                    <span style="margin-left: 10px;">Capture DOM content and process on server</span>
                  </li>
                </ul>
              </div>
              
              <p style="margin: 15px 0 5px 0; font-size: 13px; color: #666;">
                <i class="fas fa-info-circle"></i> You can also right-click on any page or link and select options from the context menu.
              </p>
            </div>
          </div>
          
          <!-- Ghost-style server configuration -->
          <div class="ghost-search-container" style="max-width: 850px; margin: 0 auto; padding: 0 0 20px 0;">
            <div class="ghost-control-card">
              <div class="ghost-control-header">
                <div class="ghost-control-icon">
                  <i class="fas fa-server"></i>
                </div>
                <h3 class="ghost-control-title">Server Configuration</h3>
              </div>
              
              <p style="margin: 15px 0 10px 0; font-size: 14px;">
                The extension connects to the Gnosis Wraith server running at <code style="background-color: rgba(108, 99, 255, 0.1); color: #6c63ff; padding: 2px 6px; border-radius: 4px;">http://localhost:5678</code> by default.
              </p>
              
              <div style="background: var(--card-bg); border-radius: 8px; padding: 15px; margin-top: 10px; margin-bottom: 5px; box-shadow: 0 2px 6px rgba(0,0,0,0.05);">
                <p style="margin-top: 0; font-weight: 500;">To change the server URL:</p>
                <ol style="padding-left: 25px; margin-bottom: 0;">
                  <li>Click on the extension icon in your browser toolbar</li>
                  <li>Click on the <strong>"Settings"</strong> tab</li>
                  <li>Enter the new server URL</li>
                  <li>Click <strong>"Save Settings"</strong></li>
                </ol>
              </div>
            </div>
          </div>
        </section>

        <!-- Crawl Philosophy Tab -->
        <section id="crawl-philosophy" class="tab-content card">
          <div class="author-quote">
            <blockquote>
              "Not everything that can be counted counts, and not everything
              that counts can be counted."
              <cite>â€”Albert Einstein</cite>
            </blockquote>
          </div>

          <div class="philosophy-content">
            <h3>On Recursive Seeing (Crawling)</h3>

            <p>Recursive crawling is cheap until it isn't.</p>

            <p>
              It looks efficientâ€”"just follow the links"â€”but what you get is a
              tangle of algorithms chasing shadows:
            </p>

            <ul class="philosophy-list">
              <li>SEO traps</li>
              <li>Pagination loops</li>
              <li>Session ID noise</li>
              <li>Infinite comment threads</li>
              <li>JavaScript-rendered redirects that never settle</li>
            </ul>

            <p>It's not perception. It's just thrashing.</p>

            <p>Wraith doesn't follow links.</p>

            <p class="highlighted-text">
              "What are you actually trying to learn?"<br />
              "Where does context begin and end?"
            </p>

            <p>
              If you want recursion, you will need to define the pattern within
              your own code. Wraith is happy to process any URL you send it and
              return the data it understands about that resource. This includes
              links, extracted text, extracted images and summaries.
            </p>

            <p>
              Because perception without discrimination isn't awareness. It's
              just motion.
            </p>

            <div
              class="cta-buttons"
              style="margin-top: 30px; text-align: center"
            >
              <a href="{{ url_for('list_reports') }}" class="btn primary"
                >Explore Reports</a
              >
            </div>
          </div>
        </section>

        <!-- Crawl Results Section (Shared between tabs) -->
        <section id="crawl-results" class="card" style="display: none">
          <div id="results-summary" style="font-size: 1.2em; margin-bottom: 15px; font-weight: bold;"></div>
          
          <!-- Add action buttons at the top -->
          <div id="results-actions-top" class="action-buttons" style="margin: 10px 0 15px 0; text-align: right;">
            <a
              id="html-link-top"
              href="#"
              class="btn primary"
              style="margin-right: 5px;"
              target="_blank"
              title="View formatted HTML report with full styling"
              >
              <i class="fas fa-file-alt"></i> View HTML Report</a
            >
            <a
              id="report-link-top"
              href="#"
              class="btn secondary"
              style="display: none; margin-right: 5px;"
              target="_blank"
              title="View raw markdown report"
              >
              <i class="fas fa-code"></i> View Raw Report</a
            >
            <button
              id="delete-report-btn"
              class="btn danger"
              style="display: none;"
              >
              <i class="fas fa-trash"></i> Delete Report</button
            >
          </div>
          
          <div id="results-content"></div>
          
          <!-- Keep the bottom actions too for convenience -->
          <div id="results-actions" style="margin-top: 20px;">
            <a
              id="html-link"
              href="#"
              class="btn primary"
              style="display: none"
              target="_blank"
              >View Report</a
            >
            <a
              id="report-link"
              href="#"
              class="btn secondary"
              style="display: none"
              target="_blank"
              >View Raw Report</a
            >
          </div>
        </section>
      </main>

      <!-- Simple footer -->
      <footer class="corporate-footer">
        <div class="footer-container">
          <!-- Logo and project description -->
          <div class="footer-brand">
            <div class="footer-logo">
              <i class="fas fa-ghost"></i>
              <span>Gnosis Wraith ðŸ‘»</span>
            </div>
            <p class="copyright">&copy; 2025 Gnosis</p>
          </div>
          
          <!-- Simplified navigation links -->
          <div class="footer-links">
            <div class="footer-col">
              <h4>Product</h4>
              <ul>
                <li><a href="{{ url_for('pages.wraith') }}">Wraith</a></li>
                <li><a href="#">Docs</a></li>
                <li><a href="#">API</a></li>
                <li><a href="#">Open on GitHub</a></li>
              </ul>
            </div>
            
            <div class="footer-col">
              <h4>Company</h4>
              <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">License</a></li>
                <li><a href="#">Terms</a></li>
              </ul>
            </div>
          </div>
        </div>
      </footer>
      
      <!-- Simplified footer styles -->
      <style>
        .corporate-footer {
          background-color: transparent;
          color: var(--text-muted);
          padding: 20px 0 15px;
          margin-top: 30px;
          border-top: 1px solid var(--border-color);
        }
        
        .footer-container {
          max-width: 1100px;
          margin: 0 auto;
          padding: 0 20px;
          display: flex;
          flex-wrap: wrap;
          justify-content: space-between;
        }
        
        .footer-brand {
          flex: 0 0 260px;
          margin-bottom: 20px;
        }
        
        .footer-logo {
          display: flex;
          align-items: center;
          margin-bottom: 12px;
        }
        
        .footer-logo i {
          font-size: 1.8rem;
          color: #6c63ff;
          margin-right: 10px;
        }
        
        .footer-logo span {
          font-size: 1.4rem;
          font-weight: bold;
          color: var(--text-color);
        }
        
        .copyright {
          font-size: 0.75rem;
          color: var(--text-muted);
        }
        
        .footer-links {
          display: flex;
          flex-wrap: wrap;
          gap: 30px;
        }
        
        .footer-col {
          flex: 0 0 120px;
        }
        
        .footer-col h4 {
          color: var(--text-color);
          margin-bottom: 6px;
          font-size: 1rem;
          font-weight: 500;
        }
        
        .footer-col ul {
          list-style: none;
          padding: 0;
          margin: 0;
        }
        
        .footer-col ul li {
          margin-bottom: 3px;
        }
        
        .footer-col ul li a {
          color: var(--text-muted);
          text-decoration: none;
          transition: color 0.2s ease;
          font-size: 0.85rem;
        }
        
        .footer-col ul li a:hover {
          color: #6c63ff;
        }
        
        /* Mobile responsive footer */
        @media (max-width: 768px) {
          .footer-container {
            flex-direction: column;
          }
          
          .footer-brand {
            flex: 0 0 100%;
            margin-bottom: 25px;
            text-align: center;
          }
          
          .footer-logo {
            justify-content: center;
          }
          
          .footer-links {
            justify-content: center;
          }
        }
        
        @media (max-width: 480px) {
          .footer-links {
            flex-direction: column;
            align-items: center;
            gap: 20px;
          }
          
          .footer-col {
            text-align: center;
            flex: 0 0 100%;
          }
        }
      </style>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}?v={{ range(10000, 99999) | random }}"></script>
    <script src="{{ url_for('static', filename='js/upload.js') }}?v={{ range(10000, 99999) | random }}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    
    <!-- Script for browser tabs with ghost-style -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Set up browser tab radio buttons
        const browserRadioButtons = document.querySelectorAll('#browser-radio-group .ghost-radio-button');
        const browserContents = document.querySelectorAll('.browser-content');
        
        browserRadioButtons.forEach(button => {
          button.addEventListener('click', function() {
            // Remove active class from all buttons
            browserRadioButtons.forEach(b => {
              b.classList.remove('ghost-radio-active');
              // Make icons slightly transparent for inactive buttons
              if (b.querySelector('i')) {
                b.querySelector('i').style.opacity = '0.6';
              }
            });
            
            // Add active class to clicked button
            this.classList.add('ghost-radio-active');
            // Make icon fully opaque for active button
            if (this.querySelector('i')) {
              this.querySelector('i').style.opacity = '1';
            }
            
            // Hide all content sections
            browserContents.forEach(content => content.classList.remove('active'));
            
            // Show the selected content
            const browser = this.getAttribute('data-browser');
            document.getElementById(`${browser}-instructions`).classList.add('active');
          });
          
          // Handle hover effects 
          button.addEventListener('mouseenter', function() {
            if (!this.classList.contains('ghost-radio-active') && this.querySelector('i')) {
              this.querySelector('i').style.opacity = '0.8';
            }
          });
          
          button.addEventListener('mouseleave', function() {
            if (!this.classList.contains('ghost-radio-active') && this.querySelector('i')) {
              this.querySelector('i').style.opacity = '0.6';
            }
          });
        });
      });
    </script>
  </body>
</html>
